apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - deployment.yaml
  - service.yaml
# OR
resources:
  - ../../base

-----------------------Transformers-------------------------
commonLabels:
  app.kubernetes.io/managed-by: kustomize
  app.kubernetes.io/part-of: platform
  env: prod
  
commonAnnotations:
  owner: platform-team
  managed-by: kustomize

# app â†’ dev-app-v1
namePrefix: dev-
nameSuffix: -v1

# for all resources
namespace: production

# replace images : mango => postgress:1.25
images:
  - name: mango #--> the old name of image that exist in our pod/deployment(be aware it's not the name field in pod/deployment)
    newName: postgress #--> the new name of image that replace the (mango) old name 
    newTag: 1.25 #--> mango => postgress:1.25
    
replicas:
  - name: app
    count: 3

configMapGenerator:
  - name: app-config
    literals:
      - LOG_LEVEL=debug
# or
configMapGenerator:
  - name: app-config
    files:
      - application.yaml
# its related to configmap for generate unique name when pod restated
generatorOptions:
  disableNameSuffixHash: true
# true = name: app-config 
# false = name: app-config-9k7h6t4f9d 


secretGenerator:
  - name: db-secret
    literals:
      - password=123456

patches:
  - patch.yaml











