User
│
└── WEB-Service (Service)
    │   ├─ Type: NodePort / LoadBalancer
    │   ├─ Selector: app=web
    │   └─ Endpoints
    │       └── WEB Pod IP:PORT
    │
    └── WEB Pod (Deployment / Pod)
        │   ├─ Container: web-app
        │   ├─ Image: web-image
        │   ├─ Ports: 80
        │   ├─ Env:
        │   │   └─ DB_HOST=db-svc
        │   └─ Logs / Events / Restarts
        │
        └── DB-Service (Service)
            │   ├─ Type: ClusterIP
            │   ├─ Selector: app=db
            │   └─ Endpoints
            │       └── DB Pod IP:PORT
            │
            └── DB Pod (Deployment / Pod)
                ├─ Container: database
                ├─ Image: postgres / mysql / mongodb
                ├─ Ports: 5432 / 3306 / 27017
                ├─ Volume:
                │   └─ PersistentVolumeClaim
                └─ Logs / Events
---------------------------------------------------------------------------------MAin MAP
curl  http://web-serice-ip:port
kubectl get all -n <name-space>
---WEB
kubectl get svc
kubectl describe svc web-svc 
kubectl logs web
kubectl logs web -f
kubectl logs web -f --previous
---DB
kubectl get pod
kubectl describe svc db-svc 
kubectl logs db
kubectl logs db -f
kubectl logs db -f --previous
---------------------------------------------------------------------------------USER-->
# genaeral status 
kubectl get all -n demo -o wide
kubectl get events -n demo --sort-by=.metadata.creationTimestamp | tail -n 30
---------------------------------------------------------------------------------
# service is accesible from user
kubectl get svc -n demo web-svc
kubectl get nodes -o wide
curl -v http://<NODE_IP>:<NODE_PORT>
---------------------------------------------------------------------------------WEB-->
# WEB Endpoints
kubectl get endpoints -n demo web-svc -o wide
# OR
kubectl describe svc -n demo web-svc
---------------------------------------------------------------------------------
# Service ↔ Pod Discovery (Label & Selector)
kubectl get svc -n demo web-svc -o yaml | sed -n '/selector:/,/ports:/p'
kubectl get pods -n demo --show-labels
---------------------------------------------------------------------------------
# WEB Pod
kubectl get pods -n demo -o wide
---------------------------------------------------------------------------------
# WEB Pod events
kubectl describe pod -n demo <web-pod-name>
---------------------------------------------------------------------------------
# WEB Pod & container Log
kubectl logs -n demo <web-pod-name>
kubectl logs -n demo <web-pod-name> -c <container-name>
---------------------------------------------------------------------------------
# if pod restart try to see online logs
kubectl logs -n demo <web-pod-name> -f
# previous log
kubectl logs -n demo <web-pod-name> --previous
---------------------------------------------------------------------------------
# check DB inside WEB pod
kubectl exec -n demo -it <web-pod-name> -- sh
nslookup db-svc
# OR
ping -c 1 db-svc
# port
nc -zv db-svc 5432
# OR
# we can use BusyBox
kubectl run -n demo tmp --rm -it --image=busybox:1.36 -- sh
nslookup db-svc
nc -zv db-svc 5432
---------------------------------------------------------------------------------DB-->
# DB enpoint and service
kubectl get endpoints -n demo db-svc -o wide
kubectl describe svc -n demo db-svc
---------------------------------------------------------------------------------
# DB status
kubectl get pods -n demo -o wide
kubectl describe pod -n demo <db-pod-name>
---------------------------------------------------------------------------------
# DB logs
kubectl logs -n demo <db-pod-name>
kubectl logs -n demo <db-pod-name> --previous
---------------------------------------------------------------------------------
























